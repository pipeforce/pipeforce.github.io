<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="PIPEFORCE RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="PIPEFORCE Atom Feed"><title data-react-helmet="true">Tutorial 14: Create a BPMN Workflow | PIPEFORCE</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pipeforce.github.io/docs/tutorials/create-bpmn-workflow"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Tutorial 14: Create a BPMN Workflow | PIPEFORCE"><meta data-react-helmet="true" name="description" content="In order to graphically design and automate user workflows and discuss them with internal and external teams, we believe that it is inevitable to rely on official standards, that everybody can easily understand and are accepted in industries worldwide."><meta data-react-helmet="true" property="og:description" content="In order to graphically design and automate user workflows and discuss them with internal and external teams, we believe that it is inevitable to rely on official standards, that everybody can easily understand and are accepted in industries worldwide."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pipeforce.github.io/docs/tutorials/create-bpmn-workflow"><link data-react-helmet="true" rel="alternate" href="https://pipeforce.github.io/docs/tutorials/create-bpmn-workflow" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pipeforce.github.io/docs/tutorials/create-bpmn-workflow" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f96a201f.css">
<link rel="preload" href="/assets/js/runtime~main.c89ef9ee.js" as="script">
<link rel="preload" href="/assets/js/main.55f4b8bf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><div class="announcementBar_axC9" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarContent_6uhP">We are hiring Developers. <a target="_blank" rel="noopener noreferrer" href="https://germantechjobs.de/jobs/LOGABIT-GmbH-Fullstack-Open-Source-Entwickler-mwd">Apply now!</a></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/pipeforce-logo-150w.png" alt="PIPEFORCE" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/pipeforce-logo-150w.png" alt="PIPEFORCE" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/basics">Tutorials</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/api/commands">API</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/downloads">Downloads</a></div><div class="navbar__items navbar__items--right"><a href="https://logabit.atlassian.net/servicedesk/customer/portals" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/basics">Tutorial 1: Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/create-app">Tutorial 2: Create an App</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/create-form">Tutorial 3: Create a Form</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/create-list">Tutorial 4: Create a List</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/create-pipeline">Tutorial 5: Create a Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/create-data-mapping">Tutorial 6: Data Mapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/load-json-file">Tutorial 7: Load a JSON file</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/send-email">Tutorial 8: Send an Email</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/send-teams-message">Tutorial 9: Send Teams Message</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/create-webhook">Tutorial 10: Create a Webhook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/create-pdf-stamp">Tutorial 11: Create a PDF stamp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/localworkspace">Tutorial 12: Setup CLI and Local Workspace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/release">Tutorial 13: Release an app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/create-bpmn-workflow">Tutorial 14: Create a BPMN Workflow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference / API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/downloads">Downloads</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tutorial 14: Create a BPMN Workflow</h1></header><p>In order to graphically design and automate user workflows and discuss them with internal and external teams, we believe that it is inevitable to rely on official standards, that everybody can easily understand and are accepted in industries worldwide.</p><p>This is the reason why PIPEFORCE uses <a href="https://en.wikipedia.org/wiki/Business_Process_Model_and_Notation" target="_blank" rel="noopener noreferrer">BPMN</a> as such a standard to design and execute stateful workflows. With this approach, it is easy to communicate and design in a standardized format between development, departments and externals, since everybody can refer to the official BPMN standard for explaining processes.</p><p><strong>With the new online workbench in PIPEFORCE, it is possible to discuss such BPMN workflows and design them collaboratively in the team.</strong></p><p>Lets see in this tutorial how you can design, discuss and run such workflows.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="2---the-vacation-request-workflow">2 - The vacation request workflow<a aria-hidden="true" class="hash-link" href="#2---the-vacation-request-workflow" title="Direct link to heading">‚Äã</a></h2><p>The workflow we are going to create in this tutorial will look like this:</p><p><img src="/assets/images/grafik-20210723-085211-f0d689957517e35bb68e2b2954be906b.png"></p><p>It is a simple vacation request workflow: The first task is a form which is filled-out by the employee for requesting a vacation. The second task is also a form which is filled-out by the reviewer (typically a supervisor). He approves or declines the vacation request. Depending on the decision of the supervisor, a declined or an approved email will be send to the requester.</p><p>Even if this workflow is a simple one, it contains already many of the most important items for a BPMN workflow:</p><ul><li>A start task</li><li>User tasks ‚ÄúRequest vacation‚Äù and ‚ÄúReview request‚Äù</li><li>A gateway to branch the workflow depending on the input</li><li>Service tasks to send emails</li><li>An end task</li><li>Connectors between items</li></ul><p>With these elements, you can already create many different types of workflows and run them immediately in PIPEFORCE.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="3---create-the-pipelines">3 - Create the pipelines<a aria-hidden="true" class="hash-link" href="#3---create-the-pipelines" title="Direct link to heading">‚Äã</a></h2><p>As you could see in the workflow picture above, there are two <strong>service tasks</strong>, both of which will send an email. A service task is a task, which is typically not executed by a human but by a system (typically called a ‚Äúservice‚Äù). In PIPEFORCE, this is done by mapping to a persisted pipeline. Whenever the service task is executed, it delegates to this pipeline, executes it and then returns. So lets create the two pipelines we need later to map with the two service tasks:</p><ol><li><p>Login to the portal https://YOUR<!-- -->_<!-- -->NAMESPACE.pipeforce.net</p></li><li><p>Go to <code>LOW CODE ‚Üí Workbench</code>, and select the app node in the tree you would like to create the workflow inside, or create a new app first (see <a href="/docs/tutorials/create-app">Tutorial: Create a new app</a> how to do it).</p></li><li><p>Click the plus icon at the top of the tree.</p></li><li><p>The new property creation view opens:</p><ol><li>As property key, use: <code>global/app/YOUR_APP/pipeline/send-approved-email</code>.</li><li>As mime type, use: <code>application/yaml; type=pipeline</code>.</li></ol></li><li><p>Click <code>SAVE</code>.</p></li><li><p>The property has been created, and the content editor opens.</p></li><li><p>Copy and paste this pipeline snippet (replace any existing content of the pipeline):  </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">mail.send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;requester@email.tld&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Vacation Request Approved&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Hello, your vacation request was approved.&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Replace the <code>requester@email.tld</code> by your preferred email address.</p></li><li><p>Click <code>SAVE</code>.</p></li><li><p>Now we create another pipeline like this: Select your app and click the plus icon at the top of the tree.</p></li><li><p>The new property creation view opens:</p></li><li><p>As property key, use: <code>global/app/YOUR_APP/pipeline/send-declined-email</code>.</p></li><li><p>As mime type, use: <code>application/yaml; type=pipeline</code>.</p></li><li><p>Click <code>SAVE</code>.</p></li><li><p>The property has been created, and the content editor opens.</p></li><li><p>Copy and paste this pipeline snippet (replace any existing content of the pipeline):  </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">mail.send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;requester@email.tld&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Vacation Request Declined&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Hello, your vacation request was declined.&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Replace the <code>requester@email.tld</code> by your preferred email address.</p></li><li><p>Click <code>SAVE</code>.</p></li><li><p>Hint: Its also possible to work with a single pipeline and use parameters, but to keeps things simple here and to focus on the workflow, we will use two pipelines for now.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="3---create-a-new-bpmn-workflow">3 - Create a new BPMN workflow<a aria-hidden="true" class="hash-link" href="#3---create-a-new-bpmn-workflow" title="Direct link to heading">‚Äã</a></h2><p>The next step is to create the BPMN workflow design. To do so, follow these steps:</p><ol><li><p>Go to LOW CODE ‚Üí Workbench and select the root node of your app.</p></li><li><p>Click the plus icon at the top of the tree.</p></li><li><p>The new property creation view opens:</p><ol><li>As property key, use: <code>global/app/YOUR_APP/workflow/vacation-request</code>.</li><li>As mime type, use: <code>application/xml; type=workflow</code>.</li></ol></li><li><p>Click <code>SAVE</code>.</p></li><li><p>The property was saved, and the BPMN online designer has been opened for you.</p></li><li><p><strong>Tip</strong>: In order to have more space in the designer, you can hide the very left menu by clicking on the top left grid icon. Clicking it again will bring back the menu:<br>
<img src="/assets/images/grafik-20210724-045959-a752ae328e02411257b5b93ea0146ba9.png"></p></li><li><p>Now lets create the user task ‚ÄúRequest vacation‚Äù. Add a new task, then click the wrench icon, and then select ‚ÄúUser Task‚Äù from the list:  </p><p><img src="/assets/images/grafik-20210723-094114-01e43410964fe0b97d4aff6501a53cb4.png">    </p></li><li><p>Repeat these steps with the next task ‚ÄúReview request‚Äù to have two user tasks like this:  </p><p><img src="/assets/images/vocation-request-0dfc1fb8ef830299c12c226a2c9b2818.png"></p></li><li><p>Now, let,s add the gateway and a service task:  </p><p><img src="/assets/images/vocation-request-v1-88dc7b48a3af90dc4dd4a09af3db9478.png"></p></li><li><p>Repeat these steps to create the second service task, and to add an end task. Finally, your BPMN diagram should look like this:  </p><p><img src="/assets/images/grafik-20210723-095307-66e29f501acba956833e7997232e0d3b.png"></p></li><li><p>Click <code>SAVE</code>.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="4---link-service-tasks-with-pipelines">4 - Link service tasks with pipelines<a aria-hidden="true" class="hash-link" href="#4---link-service-tasks-with-pipelines" title="Direct link to heading">‚Äã</a></h2><ol><li><p>In the next step, we will link the service tasks with the pipelines. To do so, select the ‚ÄúSend declined email‚Äù service task. In the details view, click the PIPELINE tab, and from the dropdown, select the <code>send-declined-email</code> pipeline we created before:  </p><p><img src="/assets/images/grafik-20210723-095737-6d24c93f81bdc8153588eb1932803dba.png"></p></li><li><p>Repeat these steps with the ‚ÄúSend approved email‚Äù service task and the <code>send-approved-email</code> pipeline.</p></li></ol><p><strong>Tip:</strong> In case you have already created a BPMN locally, you can also upload this file to your online BPMN editor. To do so, follow the subsequent steps:</p><ol><li>Go to your local BPMN model.</li><li>Change BPMN digram view to XML view.</li><li>Copy the XML information.</li><li>Navigate to your workflow in the Low-Code Workbench.</li><li>Open the Online BPMN Editor and change view to ‚ÄúContent Editor‚Äù.</li><li>Paste the XML information and click ‚Äúsave‚Äù.</li></ol><p>Your BPMN diagram is now available in the Online Low-Code Workbench.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="5---add-form-fields">5 - Add form fields<a aria-hidden="true" class="hash-link" href="#5---add-form-fields" title="Direct link to heading">‚Äã</a></h2><p>In the next step, we will add input fields for the user forms.</p><ol><li><p>Select the <code>Request vacation</code> task, and go to the <code>FORM</code> tab.</p></li><li><p>Click the plus icon to add a new field.</p></li><li><p>Click the pencil icon on the field to open the field details.</p></li><li><p>Set the values for the vacationStartDate like this, and click <code>APPLY</code>:  </p><p><img src="/assets/images/form-fields-details-b80359c69f5a82e4d84aef23ce04a20a.png"></p></li><li><p>Repeat this step for the field ‚ÄúVacation End‚Äù:</p><ol><li>ID = <code>vacationEndDate</code></li><li>Label = <code>Vacation End</code></li><li>Type = <code>date</code></li></ol></li><li><p>Click <code>SAVE</code> to save the current state of the BPMN workflow.</p></li><li><p>Now select the Review request task and add these field values:</p><ol><li>ID = <code>vacationApproved</code></li><li>Label = <code>Vacation Approved</code></li><li>Type = <code>boolean</code></li></ol></li><li><p>Click <code>SAVE</code> to save the current state of the BPMN workflow.</p></li><li><p>Repeat those steps to create the decline field.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="6---add-gateway-conditions">6 - Add gateway conditions<a aria-hidden="true" class="hash-link" href="#6---add-gateway-conditions" title="Direct link to heading">‚Äã</a></h2><p>Depending on whether the supervisor has approved or declined the vacation request, the workflow should execute the ‚ÄúSend declined email‚Äù or the ‚ÄúSend approved email‚Äù task. For this, we need to define rules on the gateway edges:</p><ol><li><p>Select the <strong>declined</strong> edge of the gateway, and fill-in this condition: <code>${vacationApproved == false}</code>:  </p><p><img src="/assets/images/grafik-20210727-131453-1e05d3ea8acc73c886a661030ecbd63e.png"></p></li><li><p>This makes sure that this branch is executed in case the supervisor set <code>vacationApproved</code> to false.</p></li><li><p>Repeat these steps for the task ‚ÄúSend approved email‚Äù, and set the condition to<br>
<code>${vacationApproved == true}</code>.</p></li><li><p>Click <code>SAVE</code> to save the current state of the BPMN workflow.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="7---deploy-and-run-the-workflow">7 - Deploy and run the workflow<a aria-hidden="true" class="hash-link" href="#7---deploy-and-run-the-workflow" title="Direct link to heading">‚Äã</a></h2><p>Now, its time to activate the workflow and execute it. To do so, follow these steps:</p><ol><li><p>Click <code>DEPLOY</code> to deploy the current state of the BPMN to the workflow engine.</p></li><li><p>In the left main menu, go to SERVICES ‚Üí Tasks.</p></li><li><p>Click on Start process in the upper right corner.</p></li><li><p>A dialog opens where your workflow should be listed as <code>appname_workflowname</code>, for example <code>myapp42_vacation-request</code>:  </p><p><img src="/assets/images/grafik-20210727-132250-f99c1d581452147a7d7d2e6cd241f50c.png"></p></li><li><p>Click on your process and then on <code>Start</code>.</p></li><li><p>Your process has been started in the workflow engine.</p></li><li><p>To see the tasks, you need to add a task filter: Click on <code>Add a simple filter</code>.</p></li><li><p>Now you should see the first task in the list <code>Request vacation</code>. Click it to show the form.</p></li><li><p>Then click on Claim to assign this task to you:  </p><p><img src="/assets/images/grafik-20210727-132250-f99c1d581452147a7d7d2e6cd241f50c.png"></p></li><li><p>Select a vacation start and a vacation end date, then click <code>Complete</code>.</p></li><li><p>In the next step, select the <code>Review request</code> from the tasks list.</p></li><li><p>Click on <code>Diagram</code> in the tabs list to see the current flow state:</p><p><img src="/assets/images/grafik-20210727-133238-1df4688bb997b6073e356bcb6c54c2e9.png"></p></li><li><p>Go back to the Form tab and click <code>Claim</code> again.</p></li><li><p>Now you are in the role of the supervisior. You can approve or decline the request.</p></li><li><p>Depending on your decision, you will get a approval or declined email.</p></li></ol><p><strong>Congratulations you have created your first BPMN workflow and executed it!</strong></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="8---improvement-use-workflow-variables-inside-a-pipeline">8 - Improvement: Use workflow variables inside a pipeline<a aria-hidden="true" class="hash-link" href="#8---improvement-use-workflow-variables-inside-a-pipeline" title="Direct link to heading">‚Äã</a></h2><p>Currently, the pipelines are static. Now, we are going to change this and use the <code>vacationStartDate</code> and <code>vacationEndDate</code> variables inside the pipeline and pass them into our email messages. All workflow variables like form fields in a workflow are automatically passed to a pipeline. Inside the pipeline, you can easily access it using the <code>vars.</code> context, for example<br>
<code>#{vars.vacationStartDate}</code>, <code>#{vars.vacationEndDate}</code> and <code>#{vars.vacationApproved}</code>:</p><ol><li><p>Open your <code>pipeline send-declined-email</code></p></li><li><p>Change the email message like shown below:  </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">mail.send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;requester@email.tld&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Vacation Request Declined&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        Hello, your vacation request from #{@date.format(vars.vacationStartDate, &#x27;dd/MM/YYYY&#x27;)} </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        to #{@date.format(vars.vacationEndDate, &#x27;dd/MM/YYYY&#x27;)}  was declined.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>As you can see, we use the <code>@date.format</code> util to format the date and place it in the message template.</p></li><li><p>Click <code>SAVE</code> to save the pipeline.</p></li><li><p>Repeat the steps with the pipeline <code>send-approved-email</code>.</p></li><li><p>Now, execute the workflow again and you should receive emails with the <code>vacationStartDate</code> and <code>vacationEndDate</code> dynamically set, like this example shows:  </p><p><img src="/assets/images/vocation-declined-d28e8005925bbe174483d190d63ddaca.png"></p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="9---improvement-use-a-form-as-start-trigger">9 - Improvement: Use a form as start trigger<a aria-hidden="true" class="hash-link" href="#9---improvement-use-a-form-as-start-trigger" title="Direct link to heading">‚Äã</a></h2><p>Currently, the process is started manually by accessing the task section and starting the workflow. However, in many cases a workflow should automatically be started/triggered by submitting a form, which is located in the online portal. How to create such a form in general is explained here: <a href="/docs/tutorials/create-form">Tutorial: Create a new form</a>. For the current example, follow these steps:</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-a-schema">Create a schema<a aria-hidden="true" class="hash-link" href="#create-a-schema" title="Direct link to heading">‚Äã</a></h3><ol><li><p>Go to LOW CODE ‚Üí Workbench and select the root node of your app.</p></li><li><p>Click the plus icon at the top of the tree.</p></li><li><p>The new property creation view opens:</p><ol><li>As property key, use: <code>global/app/YOUR_APP/object/vacationrequest/v1/schema</code>.</li><li>As mime type, use: <code>application/json; type=schema</code>.</li></ol></li><li><p>Click <code>SAVE</code>.</p></li><li><p>The new schema was created.</p></li><li><p><img src="/assets/images/Bildschirmfoto-2021-10-21-um-a12fed314b58b6a979fdf42ce16f9709.png"></p></li><li><p>Copy and paste this snippet to the schema (replace any existing content):</p></li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;object&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;vacationStartDate&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;string&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;format&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;date&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;From&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;The requested vacation start.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;vacationEndDate&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;string&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;format&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;date&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;To&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;The requested vacation end.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;comment&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;string&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Comment&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;The comment for reviewer.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="8"><li>Click <code>SAVE</code>.</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-a-form">Create a form<a aria-hidden="true" class="hash-link" href="#create-a-form" title="Direct link to heading">‚Äã</a></h3><ol><li><p>Go to LOW CODE ‚Üí Workbench and select the root node of your app.</p></li><li><p>Click the plus icon at the top of the tree.</p></li><li><p>The new property creation view opens:</p><ol><li>As property key, use: <code>global/app/YOUR_APP/form/vacationrequest</code>.</li><li>As mime type, use: <code>application/json; type=form</code>.</li></ol></li><li><p>Click <code>SAVE</code>.</p></li><li><p>The new form was created.</p></li><li><p>Navigate to the form.</p></li><li><p>Copy and paste this snippet to the form (replace any existing content):</p></li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Start vacation request&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;For vacation approval you can request here.&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;schema&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;property.list?filter=global/app/YOUR_APP/object/vacationrequest/v1/schema&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;output&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;global/app/YOUR_APP/object/vacationrequest/v1/instance/%23%7Bvar.property.uuid%7D&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Tip:</strong> Make sure to replace YOUR<!-- -->_<!-- -->APP by the name of your app.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-a-starting-pipeline">Add a starting pipeline<a aria-hidden="true" class="hash-link" href="#add-a-starting-pipeline" title="Direct link to heading">‚Äã</a></h3><ol><li><p>Go to LOW CODE ‚Üí Workbench and select the root node of your app.</p></li><li><p>Click the plus icon at the top of the tree.</p></li><li><p>The new property creation view opens:</p><ol><li>As property key, use: <code>global/app/YOUR_APP/pipeline/trigger-vacation-request</code>.</li><li>As mime type, use: <code>application/yaml; type=pipeline</code>.</li></ol></li><li><p>Click <code>SAVE</code>.</p></li><li><p>The new pipeline has been created.</p></li><li><p>Copy and paste this pipeline snippet to the pipeline (replace any existing content):</p></li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">event.listen</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;property.created&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#{body.target.key.contains(&#x27;global/app/YOUR_APP/object/vacationrequest/v1/instance&#x27;)}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">set.var</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;formData&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#{@property.lazy(body.target.key)}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">workflow.start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;YOUR_APP_vacation-request&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">workflowModelInstanceKey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#{body.target.key}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;</span><span class="token comment" style="color:rgb(98, 114, 164)">#{{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">&#x27;vacationStartDate&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> @date.parseToInstant(vars.formData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;vacationStartDate&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">&#x27;vacationEndDate&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> @date.parseToInstant(vars.formData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;vacationEndDate&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Tip:</strong> Make sure to replace YOUR<!-- -->_<!-- -->APP by the name of your app.</p><p>As you can see in the pipeline above, we introduced in this section the concept of Workflow Model with: <code>workflowModelInstanceKey: &quot;#{body.target.key}&quot;</code>. We recommend to use this approach to work with values and variables of an workflow in a more structured way.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="adapt-the-workflow-model">Adapt the workflow model<a aria-hidden="true" class="hash-link" href="#adapt-the-workflow-model" title="Direct link to heading">‚Äã</a></h3><p>Since you have now a new start trigger for your workflow, you don‚Äôt need the first step in your BPMN-Workflow Model any longer. To adapt your workflow model, go to the BPMN Modeler, and remove the first step (‚ÄúRequest Vacation‚Äù).</p><p>Your new workflow should look like this:</p><p><img src="/assets/images/image-20211021-171228-3481d6c524f6046d328f0ffdd27977cb.png"></p><p>After you have updated the BPMN-Workflow, press <code>DEPLOY</code>.</p><p>Test your new workflow by selecting your form in the Online Portal, and entering some values. After submitting the form, you can directly see the new task for the Reviewer in the task view.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="10---improvement-use-dynamic-email-receiver">10 - Improvement: Use dynamic email receiver<a aria-hidden="true" class="hash-link" href="#10---improvement-use-dynamic-email-receiver" title="Direct link to heading">‚Äã</a></h2><p>Currently, the email is sent always to the address you have entered in the pipeline. However, in case the form is deployed for multiple users, the emails should be sent always to the person who submitted the vacation request (i.e. Requester). To enhance the workflow accordingly, follow these steps:</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="modify-your-trigger-pipeline">Modify your trigger pipeline<a aria-hidden="true" class="hash-link" href="#modify-your-trigger-pipeline" title="Direct link to heading">‚Äã</a></h3><p>In your trigger pipeline, you can directly add the values you would like to define as process variables. With those process variables, you can work in subsequent steps of the workflow. In our example, we define the logged in user, who is starting the workflow as the Requester. To do so, follow these steps:</p><ol><li>Go to LOW CODE ‚Üí Workbench and select your trigger pipeline <code>global/app/YOUR_APP/pipeline/trigger-vacation-request</code>.</li><li>Copy and paste this pipeline snippet to the pipeline (replace any existing content):</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">event.listen</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;property.created&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#{body.target.key.contains(&#x27;global/app/YOUR_APP/object/vacationrequest/v1/instance&#x27;)}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">set.var</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;formData&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#{@property.lazy(body.target.key)}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">workflow.start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;YOUR_APP_vacation-request&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">workflowModelInstanceKey</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#{body.target.key}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;</span><span class="token comment" style="color:rgb(98, 114, 164)">#{{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">&#x27;vacationStartDate&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> @date.parseToInstant(vars.formData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;vacationStartDate&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">&#x27;vacationEndDate&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> @date.parseToInstant(vars.formData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;vacationEndDate&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">&#x27;requester&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> @user.email()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>As you can see at the bottom of the pipeline, in addition to the <code>vacation start date</code> and the <code>vacation end date</code>, you have now defined a new process variable <code>requester</code>, and matched the email of the user who started the workflow to this variable.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="modify-your-email-pipeline">Modify your email pipeline<a aria-hidden="true" class="hash-link" href="#modify-your-email-pipeline" title="Direct link to heading">‚Äã</a></h3><p>You can now modify your email pipelines to sent notifications about approved and declined emails accordingly:</p><ol><li>Go to LOW CODE ‚Üí Workbench and select your approved email pipeline <code>global/app/YOUR_APP/pipeline/send-approved-email</code>.</li><li>Copy and paste this pipeline snippet to the pipeline (replace any existing content):</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">mail.send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#{vars.requester}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Vacation Request Approved&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        Hello, your vacation request from #{@date.format(vars.vacationStartDate, &#x27;dd/MM/YYYY&#x27;)} </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        to #{@date.format(vars.vacationEndDate, &#x27;dd/MM/YYYY&#x27;)} was approved.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Adapt your declined email in the same way.</p><ol><li>Go to LOW CODE ‚Üí Workbench and select your approved email pipeline <code>global/app/YOUR_APP/pipeline/send-declined-email</code></li><li>Copy and paste this pipeline snippet to the pipeline (replace any existing content):</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">mail.send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#{vars.requester}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">subject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Vacation Request Declined&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        Hello, your vacation request from #{@date.format(vars.vacationStartDate, &#x27;dd/MM/YYYY&#x27;)} </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">        to #{@date.format(vars.vacationEndDate, &#x27;dd/MM/YYYY&#x27;)} was declined.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="11---improvement-work-with-form-inputs-in-subsequent-steps">11 - Improvement: Work with form inputs in subsequent steps<a aria-hidden="true" class="hash-link" href="#11---improvement-work-with-form-inputs-in-subsequent-steps" title="Direct link to heading">‚Äã</a></h2><p>Currently, the Reviewer can see the inputs (<code>vacation start date</code> and <code>vacation end date</code>) made by the Requester. We now improve this task view of the Reviewer, so that he can see the user email who have sent the vacation request. To do so, follow these steps:</p><ol><li><p>Navigate to the Online Workflow Editor of your app, and select the User Task ‚ÄúReview Request‚Äù.</p></li><li><p>Navigate to the ‚ÄúForm‚Äù section.</p></li><li><p>Add a new form field; Use the ID <code>requester</code> and Label <code>Requester</code>.</p></li><li><p>Adapt type of <code>vacationStartDate</code> and <code>vacationEndDate</code> to <code>string</code>.</p></li><li><p>Click <code>SAVE</code>.</p></li></ol><p><img src="/assets/images/image-20211021-174605-f13f32eea76198e3fd36790f1b13496f.png"></p><p><strong>Tip:</strong> Since the requester was already defined as process variable in the previous steps, you can work with this value by just referring to the ID. In case you have skipped some previous steps, you have to go back and define the Requester as a process variable.</p><p>The new task form of the Reviewer should now look like this:</p><p><img src="/assets/images/Bildschirmfoto-4be8e94c3db2dc4f08cf3a3252db5a39.png"></p><p>If you now start the workflow, you are able to see this additional information (requester email) in the task form of the Reviewer.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/pipeforce/pipeforce.github.io/edit/master/docs/tutorials/140_create-bpmn-workflow.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorials/release"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->Tutorial 13: Release an app</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guides/command"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Command<!-- --> ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#2---the-vacation-request-workflow" class="table-of-contents__link toc-highlight">2 - The vacation request workflow</a></li><li><a href="#3---create-the-pipelines" class="table-of-contents__link toc-highlight">3 - Create the pipelines</a></li><li><a href="#3---create-a-new-bpmn-workflow" class="table-of-contents__link toc-highlight">3 - Create a new BPMN workflow</a></li><li><a href="#4---link-service-tasks-with-pipelines" class="table-of-contents__link toc-highlight">4 - Link service tasks with pipelines</a></li><li><a href="#5---add-form-fields" class="table-of-contents__link toc-highlight">5 - Add form fields</a></li><li><a href="#6---add-gateway-conditions" class="table-of-contents__link toc-highlight">6 - Add gateway conditions</a></li><li><a href="#7---deploy-and-run-the-workflow" class="table-of-contents__link toc-highlight">7 - Deploy and run the workflow</a></li><li><a href="#8---improvement-use-workflow-variables-inside-a-pipeline" class="table-of-contents__link toc-highlight">8 - Improvement: Use workflow variables inside a pipeline</a></li><li><a href="#9---improvement-use-a-form-as-start-trigger" class="table-of-contents__link toc-highlight">9 - Improvement: Use a form as start trigger</a><ul><li><a href="#create-a-schema" class="table-of-contents__link toc-highlight">Create a schema</a></li><li><a href="#create-a-form" class="table-of-contents__link toc-highlight">Create a form</a></li><li><a href="#add-a-starting-pipeline" class="table-of-contents__link toc-highlight">Add a starting pipeline</a></li><li><a href="#adapt-the-workflow-model" class="table-of-contents__link toc-highlight">Adapt the workflow model</a></li></ul></li><li><a href="#10---improvement-use-dynamic-email-receiver" class="table-of-contents__link toc-highlight">10 - Improvement: Use dynamic email receiver</a><ul><li><a href="#modify-your-trigger-pipeline" class="table-of-contents__link toc-highlight">Modify your trigger pipeline</a></li><li><a href="#modify-your-email-pipeline" class="table-of-contents__link toc-highlight">Modify your email pipeline</a></li></ul></li><li><a href="#11---improvement-work-with-form-inputs-in-subsequent-steps" class="table-of-contents__link toc-highlight">11 - Improvement: Work with form inputs in subsequent steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/basics">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">LOGABIT</div><ul class="footer__items"><li class="footer__item"><a href="https://pipeforce.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://logabit.atlassian.net/servicedesk/customer/portals" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://pipeforce.io/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">News</a></li><li class="footer__item"><a href="https://pipeforce.io/impressum/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><br>Copyright ¬© 2021 <b>LOGABIT GmbH.</b></div></div></div></footer></div>
<script src="/assets/js/runtime~main.c89ef9ee.js"></script>
<script src="/assets/js/main.55f4b8bf.js"></script>
</body>
</html>